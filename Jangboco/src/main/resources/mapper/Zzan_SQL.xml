<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="zzan">
	<select id="getMarketList" parameterType="hashmap" resultType="hashmap">
		SELECT M.MARKET_NO,M.MARKET_NAME, M.DISCT_NO, D.DISCT_NAME,M.LAT,M.LNG,M.MARKET_ADDRS,
		MM.PHONE_NUM,MM.START_TIME,MM.END_TIME,MM.MARKET_MEMBER_NO
		FROM DISCT D JOIN MARKET M
        ON D.DISCT_NO=M.DISCT_NO
        LEFT OUTER JOIN MARKET_MEMBER MM
        ON M.MARKET_NO=MM.MARKET_NO
		WHERE LAT is not null
		<if test = "searchTxt != null and searchTxt != ''">
			<choose>
				<when test = "searchGbn eq 0">
					and M.MARKET_NAME like '%' || #{searchTxt} || '%'
				</when>
				<!-- <when test = "searchGbn eq 1">
					and M.M_NM like '%' || #{searchTxt} || '%'
				</when> -->
			</choose>
		</if>
	</select>
</mapper>